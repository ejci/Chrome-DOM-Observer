"use strict";angular.module("angular-rickshaw",[]).directive("rickshaw",function($compile){return{restrict:"EA",scope:{options:"=rickshawOptions",series:"=rickshawSeries",features:"=rickshawFeatures"},link:function(scope,element){function getSettings(el){var settings=angular.copy(scope.options);return settings.element=el,settings.series=scope.series,settings}function update(){var mainEl=angular.element(element);mainEl.append(graphEl),mainEl.empty();var graphEl=$compile("<div></div>")(scope);mainEl.append(graphEl);var settings=getSettings(graphEl[0]);if(graph=new Rickshaw.Graph(settings),scope.features&&scope.features.hover){var hoverConfig={graph:graph};hoverConfig.xFormatter=scope.features.hover.xFormatter,hoverConfig.yFormatter=scope.features.hover.yFormatter;{new Rickshaw.Graph.HoverDetail(hoverConfig)}}if(scope.features&&scope.features.palette)for(var palette=new Rickshaw.Color.Palette({scheme:scope.features.palette}),i=0;i<settings.series.length;i++)settings.series[i].color=palette.color();if(graph.render(),scope.features&&scope.features.xAxis){var xAxisConfig={graph:graph};if(scope.features.xAxis.timeUnit){var time=new Rickshaw.Fixtures.Time;xAxisConfig.timeUnit=time.unit(scope.features.xAxis.timeUnit)}var xAxis=new Rickshaw.Graph.Axis.Time(xAxisConfig);xAxis.render()}if(scope.features&&scope.features.yAxis){var yAxisConfig={graph:graph};scope.features.yAxis.tickFormat&&(yAxisConfig.tickFormat=Rickshaw.Fixtures.Number[scope.features.yAxis.tickFormat]);var yAxis=new Rickshaw.Graph.Axis.Y(yAxisConfig);yAxis.render()}if(scope.features&&scope.features.legend){var legendEl=$compile("<div></div>")(scope);mainEl.append(legendEl);var legend=new Rickshaw.Graph.Legend({graph:graph,element:legendEl[0]});if(scope.features.legend.toggle){new Rickshaw.Graph.Behavior.Series.Toggle({graph:graph,legend:legend})}if(scope.features.legend.highlight){new Rickshaw.Graph.Behavior.Series.Highlight({graph:graph,legend:legend})}}}var graph;scope.$watch("options",function(newValue,oldValue){angular.equals(newValue,oldValue)||update()}),scope.$watch("series",function(newValue,oldValue){angular.equals(newValue,oldValue)||update()}),scope.$watch("features",function(newValue,oldValue){angular.equals(newValue,oldValue)||update()}),update()},controller:function(){}}});